---
import Layout from '../../layouts/Base.astro';
import '../../styles/subcategory.css';
import { getCollection } from 'astro:content';
import SubcategoryProductCard from '../../components/SubcategoryProductCard.astro';
import ProductSidebar from '../../components/ProductSidebar.astro';
import RelatedProductsGrid from '../../components/RelatedProductsGrid.astro';
import CotizacionForm from '../../components/CotizacionForm.astro';

// Obtener productos de mangueras
const todasMangueras = (await getCollection('productos', ({ data }) => data.categoria === 'mangueras')).sort((a, b) => a.data.orden - b.data.orden);

// Filtrar productos forestales por subcategoria
const productosForestal = todasMangueras.filter(p => p.data.subcategoria === 'forestal');

// Otros productos para la secci√≥n de relacionados
const otrasMangueras = todasMangueras.filter(p => !productosForestal.includes(p));

// Definir las subcategor√≠as de mangueras para el sidebar
const subcategorias = [
  {
    slug: 'millhose',
    nombre: 'Manguera Millhose',
    descripcion: 'Doble forro poli√©ster, gabinetes',
    activo: false
  },
  {
    slug: 'blindex',
    nombre: 'Manguera Blindex',
    descripcion: 'Resistente a llama y qu√≠micos',
    activo: false
  },
  {
    slug: 'succion',
    nombre: 'Manguera de Succi√≥n',
    descripcion: 'Refuerzo helicoidal, vac√≠o',
    activo: false
  },
  {
    slug: 'forestal',
    nombre: 'Manguera Forestal',
    descripcion: 'Ultraligera, terreno dif√≠cil',
    activo: true
  },
];
---

<Layout
  title="Manguera Forestal Incendios | Venta M√©xico"
  description="Manguera forestal para incendios forestales. Sint√©tico poli√©ster alta presi√≥n, longitud 30m. Para bomberos y brigadas CONAFOR. M√©xico."
  activePage="equipos"
  heroTitle="Manguera Forestal"
  heroIntro="Mangueras ultraligeras dise√±adas espec√≠ficamente para combate de incendios forestales y operaciones en terreno dif√≠cil. Su construcci√≥n de poli√©ster sint√©tico permite transportar grandes longitudes con m√≠nimo peso, facilitando el despliegue r√°pido en zonas remotas sin acceso vehicular."
  heroBadge="Mangueras Contra Incendios"
  heroMetrics={[
    { valor: "30m", texto: "Longitud est√°ndar" },
    { valor: "1\"", texto: "Di√°metro ligero" },
    { valor: "300", texto: "PSI presi√≥n" }
  ]}
  heroPrimaryText="Ver Cat√°logo"
  heroPrimaryLink="#catalogo"
  heroSecondaryText="Solicitar Cotizaci√≥n"
  heroSecondaryLink="#cotizar"
  heroShowRightContent={true}
>

  <!-- HERO CONTENT -->
  <Fragment slot="hero-content">
    <p>La <strong>manguera forestal</strong> est√° optimizada para el combate de incendios en √°reas naturales protegidas, bosques y zonas de dif√≠cil acceso. Su construcci√≥n 100% sint√©tica en poli√©ster de alta tenacidad reduce el peso hasta un 40% comparado con mangueras convencionales, permitiendo que brigadistas transporten m√∫ltiples tramos en terreno escarpado. El forro interno de poliuretano garantiza flujo sin turbulencias y resistencia a la abrasi√≥n por arrastre en superficies rocosas.</p>
    <p><strong>Gama de M√©xico</strong> suministra mangueras forestales en di√°metros de 1" y 1.5" con longitudes de 30 metros, el est√°ndar para brigadas de CONAFOR, Protecci√≥n Civil estatal y cuerpos de bomberos con responsabilidad en zonas rurales. Disponibles con coples de aluminio tipo forestal o Storz seg√∫n especificaci√≥n. Cumplimiento NFPA 1961 para mangueras de ataque ligero.</p>
  </Fragment>

  <!-- MAIN CONTENT WITH SIDEBAR -->
  <section class="subcat-content">
    <div class="container">
      <div class="subcat-layout">

        <!-- MAIN CONTENT (LEFT) -->
        <main class="subcat-main">

          <!-- CATALOG HEADER -->
          <div class="catalog-header">
            <div class="catalog-header__text">
              <h2 class="catalog-header__title">Cat√°logo de Mangueras Forestales</h2>
              <p class="catalog-header__desc">Selecciona el producto que mejor se adapte a tu operaci√≥n</p>
            </div>
            <div class="catalog-header__count">
              <span class="catalog-header__number">{productosForestal.length}</span>
              <span class="catalog-header__label">producto{productosForestal.length !== 1 ? 's' : ''}</span>
            </div>
          </div>

          <!-- PRODUCTS GRID -->
          <div class="categories__grid">
            {productosForestal.map((producto) => (
              <SubcategoryProductCard
                title={producto.data.title}
                description={producto.data.description}
                brand={producto.data.marca}
                image={producto.data.imagen}
                productSlug={producto.id}
                flow={producto.data.flujo}
                material={producto.data.material}
                certifications={producto.data.certificaciones}
              />
            ))}
          </div>

          {productosForestal.length === 0 && (
            <div class="catalog-empty">
              <div class="catalog-empty__icon">üîç</div>
              <h3 class="catalog-empty__title">Pr√≥ximamente m√°s opciones</h3>
              <p class="catalog-empty__text">Estamos agregando m√°s productos de mangueras forestales. Mientras tanto, solicita una cotizaci√≥n personalizada.</p>
              <a href="#cotizar" class="btn btn--primary">Solicitar Cotizaci√≥n</a>
            </div>
          )}

          <!-- TECHNICAL INFO -->
          <div class="tech-info">
            <h3 class="tech-info__title">Especificaciones T√©cnicas Generales</h3>
            <div class="tech-info__grid">
              <div class="tech-info__item">
                <span class="tech-info__label">Peso</span>
                <span class="tech-info__value">40% m√°s ligera</span>
              </div>
              <div class="tech-info__item">
                <span class="tech-info__label">Presi√≥n trabajo</span>
                <span class="tech-info__value">200-250 PSI</span>
              </div>
              <div class="tech-info__item">
                <span class="tech-info__label">Di√°metros</span>
                <span class="tech-info__value">1" y 1.5"</span>
              </div>
              <div class="tech-info__item">
                <span class="tech-info__label">Forro</span>
                <span class="tech-info__value">Simple alta densidad</span>
              </div>
              <div class="tech-info__item">
                <span class="tech-info__label">Acoples</span>
                <span class="tech-info__value">Aluminio ligero</span>
              </div>
              <div class="tech-info__item">
                <span class="tech-info__label">Almacenamiento</span>
                <span class="tech-info__value">Enrollado compacto</span>
              </div>
            </div>
          </div>

          <!-- CTA FINAL -->
          <div class="subcat-cta-final">
            <div class="subcat-cta-final__content">
              <h3 class="subcat-cta-final__title">¬øEquipamiento para brigadas forestales?</h3>
              <p class="subcat-cta-final__desc">Asesor√≠a especializada para selecci√≥n de mangueras y accesorios para operaciones en terreno dif√≠cil.</p>
            </div>
            <a href="#cotizar" class="btn btn--primary">Solicitar Cotizaci√≥n</a>
          </div>

        </main>

        <!-- SIDEBAR (RIGHT) -->
        <ProductSidebar
          navTitulo="Tipos de Mangueras"
          subcategorias={subcategorias}
          baseUrl="/mangueras"
          backLinkHref="/mangueras-contra-incendios"
          backLinkTexto="Ver todas las mangueras"
          certificaciones={[
            { siglas: "FM", nombre: "Factory Mutual" },
            { siglas: "UL", nombre: "UL Listed" },
            { siglas: "NFPA", nombre: "NFPA 1961" }
          ]}
          marcas={["Key Fire Hose", "Snap-Tite", "All American Hose", "Niedner"]}
          aplicaciones={[
            "Combate de incendios forestales",
            "Brigadas forestales",
            "Protecci√≥n civil",
            "√Åreas de dif√≠cil acceso"
          ]}
          productosRelacionados={[
            { href: "/boquillas-contra-incendios", nombre: "Boquillas Contra Incendios" },
            { href: "/monitores-contra-incendios", nombre: "Monitores Contra Incendios" },
            { href: "/valvulas-contra-incendios", nombre: "V√°lvulas Contra Incendios" },
            { href: "/conexiones-herrajes-contra-incendios", nombre: "Conexiones y Herrajes" }
          ]}
        />

      </div>
    </div>
  </section>

  <!-- RELATED PRODUCTS -->
  <RelatedProductsGrid
    titulo="Otras Mangueras Contra Incendios"
    subtitulo="Explora m√°s opciones para tu sistema de protecci√≥n"
    productos={otrasMangueras}
    maxProductos={3}
    verTodosLink="/mangueras-contra-incendios"
    verTodosTexto="Ver todas las mangueras"
  />

  <CotizacionForm
    titulo="Cotiza Mangueras Forestales"
    tipoEquipo="Mangueras"
    pagina="Mangueras Forestales"
  />

</Layout>
