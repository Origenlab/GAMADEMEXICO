---
import Layout from '../../layouts/Base.astro';
import '../../styles/subcategory.css';
import { getCollection } from 'astro:content';
import SubcategoryProductCard from '../../components/SubcategoryProductCard.astro';
import ProductSidebar from '../../components/ProductSidebar.astro';
import RelatedProductsGrid from '../../components/RelatedProductsGrid.astro';
import CotizacionForm from '../../components/CotizacionForm.astro';

// 1. Obtener todos los productos de la categor칤a conexiones-herrajes
const todosProductos = (await getCollection('productos', ({ data }) =>
  data.categoria === 'conexiones-herrajes'
)).sort((a, b) => a.data.orden - b.data.orden);

// 2. Filtrar por subcategor칤a: Conexi칩n Y (Wye)
const productosSubcategoria = todosProductos.filter(p => p.data.subcategoria === 'wye');

// 3. Obtener otros productos para secci칩n de relacionados
const otrosProductos = todosProductos.filter(p => !productosSubcategoria.includes(p));

// 4. Definir subcategor칤as para navegaci칩n
const subcategorias = [
  { slug: 'adaptadores', nombre: 'Adaptadores de Bronce', descripcion: 'Conversi칩n entre roscas NH, NPT, Storz', activo: false },
  { slug: 'wye', nombre: 'Conexi칩n Y (Wye)', descripcion: 'Derivaci칩n en dos salidas', activo: true },
  { slug: 'siamesa', nombre: 'Toma Siamesa FDC', descripcion: 'Conexi칩n para bomberos', activo: false },
  { slug: 'coples', nombre: 'Coples y Reducciones', descripcion: 'Conexi칩n r치pida Storz', activo: false },
  { slug: 'chiflones', nombre: 'Chiflones de Tres Pasos', descripcion: 'Control de patr칩n de descarga', activo: false },
  { slug: 'accesorios', nombre: 'Accesorios y Herrajes', descripcion: 'Tapones, caps, niples', activo: false },
];
---

<Layout
  title="Conexi칩n Y Wye con V치lvulas de Bola | M칠xico"
  description="Conexi칩n Y (Wye) con v치lvulas de bola para derivar l칤neas de manguera. Modelos B-97-A y B-100-A Elkhart Brass. UL/FM. M칠xico."
  activePage="equipos"
  heroTitle="Conexi칩n Y (Wye)"
  heroIntro="Bifurcadores que permiten dividir una l칤nea de manguera en dos salidas independientes, cada una con v치lvula de bola para control individual del flujo. Esenciales para operaciones de combate de incendios que requieren m칰ltiples l칤neas de ataque desde una sola fuente de agua."
  heroBadge="Conexiones y Herrajes"
  heroMetrics={[
    { valor: "2", texto: "Salidas" },
    { valor: "1/4 vuelta", texto: "V치lvulas" },
    { valor: "UL/FM", texto: "Certificaci칩n" }
  ]}
  heroPrimaryText="Ver Cat치logo"
  heroPrimaryLink="#catalogo"
  heroSecondaryText="Solicitar Cotizaci칩n"
  heroSecondaryLink="#cotizar"
  heroShowRightContent={true}
>

  <!-- HERO CONTENT -->
  <Fragment slot="hero-content">
    <p>Las <strong>conexiones Y (Wye)</strong> son dispositivos de bifurcaci칩n que dividen una l칤nea de suministro en dos salidas independientes. Cada salida incorpora una v치lvula de bola de cuarto de vuelta que permite abrir o cerrar el flujo instant치neamente, facilitando el control t치ctico durante operaciones de combate. Los modelos B-97-A y B-100-A de Elkhart Brass son el est치ndar de la industria para aplicaciones de bomberos e industriales.</p>
    <p><strong>Gama de M칠xico</strong> ofrece conexiones Wye en bronce fundido y aluminio forjado, con configuraciones de entrada/salida en roscas NH de 2-1/2" x 1-1/2" y 2-1/2" x 2-1/2". Las v치lvulas de bola est치n dise침adas para operar a presiones de hasta 300 PSI con m칤nima ca칤da de presi칩n. Certificaci칩n UL/FM garantiza rendimiento confiable en las condiciones m치s exigentes de emergencia.</p>
  </Fragment>

  <!-- CONTENT + SIDEBAR -->
  <section class="subcat-content">
    <div class="container">
      <div class="subcat-layout">

        <!-- MAIN CONTENT -->
        <main class="subcat-main">
          <div class="catalog-header">
            <div class="catalog-header__text">
              <h2 class="catalog-header__title">Cat치logo de Adaptadores de Bronce</h2>
              <p class="catalog-header__desc">Selecciona el modelo que mejor se adapte a tu instalaci칩n</p>
            </div>
            <div class="catalog-header__count">
              <span class="catalog-header__number">{productosSubcategoria.length}</span>
              <span class="catalog-header__label">producto{productosSubcategoria.length !== 1 ? 's' : ''}</span>
            </div>
          </div>

          <!-- Products Grid -->
          <div class="categories__grid">
            {productosSubcategoria.map((producto) => (
              <SubcategoryProductCard
                title={producto.data.title}
                description={producto.data.description}
                brand={producto.data.marca}
                image={producto.data.imagen}
                productSlug={producto.id}
                flow={producto.data.flujo}
                material={producto.data.material}
                certifications={producto.data.certificaciones}
              />
            ))}
          </div>

          {productosSubcategoria.length === 0 && (
            <div class="catalog-empty">
              <div class="catalog-empty__icon">游댌</div>
              <h3 class="catalog-empty__title">Pr칩ximamente m치s opciones</h3>
              <p class="catalog-empty__text">Estamos agregando m치s adaptadores de diferentes marcas. Solicita una cotizaci칩n personalizada.</p>
              <a href="#cotizar" class="btn btn--primary">Solicitar Cotizaci칩n</a>
            </div>
          )}

          <!-- Tech Info -->
          <div class="tech-info">
            <h3 class="tech-info__title">Especificaciones T칠cnicas de Adaptadores</h3>
            <div class="tech-info__grid">
              <div class="tech-info__item">
                <span class="tech-info__label">Presi칩n de trabajo</span>
                <span class="tech-info__value">250-300 PSI</span>
              </div>
              <div class="tech-info__item">
                <span class="tech-info__label">Presi칩n de prueba</span>
                <span class="tech-info__value">1,000 PSI</span>
              </div>
              <div class="tech-info__item">
                <span class="tech-info__label">Di치metros</span>
                <span class="tech-info__value">1" a 6"</span>
              </div>
              <div class="tech-info__item">
                <span class="tech-info__label">Roscas</span>
                <span class="tech-info__value">NH, NPT, Storz</span>
              </div>
              <div class="tech-info__item">
                <span class="tech-info__label">Temperatura</span>
                <span class="tech-info__value">-65춿F a 250춿F</span>
              </div>
              <div class="tech-info__item">
                <span class="tech-info__label">Material</span>
                <span class="tech-info__value">Bronce / Aluminio</span>
              </div>
            </div>
          </div>

          <!-- CTA Final -->
          <div class="subcat-cta-final">
            <div class="subcat-cta-final__content">
              <h3 class="subcat-cta-final__title">쯅o encuentras la configuraci칩n que necesitas?</h3>
              <p class="subcat-cta-final__desc">Tenemos acceso al cat치logo completo de Elkhart Brass. Cont치ctanos para adaptadores en roscas especiales o configuraciones personalizadas.</p>
            </div>
            <a href="#cotizar" class="btn btn--primary">Solicitar Cotizaci칩n Especial</a>
          </div>
        </main>

        <!-- SIDEBAR -->
        <ProductSidebar
          navTitulo="Tipos de Conexiones"
          subcategorias={subcategorias}
          baseUrl="/conexiones"
          backLinkHref="/conexiones-herrajes-contra-incendios"
          backLinkTexto="Ver todas las conexiones"
          certificaciones={[
            { siglas: "FM", nombre: "Factory Mutual" },
            { siglas: "UL", nombre: "UL Listed" },
            { siglas: "NOM", nombre: "NOM-002-STPS" }
          ]}
          marcas={["Dixon", "Elkhart Brass", "Harrington", "Action Coupling"]}
          aplicaciones={[
            "Divisi칩n de l칤neas",
            "Operaciones de bomberos",
            "Sistemas de rociadores",
            "Redes contra incendio"
          ]}
          productosRelacionados={[
            { href: "/gabinetes-hidrantes-contra-incendios", nombre: "Gabinetes e Hidrantes" },
            { href: "/mangueras-contra-incendios", nombre: "Mangueras Contra Incendios" },
            { href: "/valvulas-contra-incendios", nombre: "V치lvulas Contra Incendios" },
            { href: "/boquillas-contra-incendios", nombre: "Boquillas Contra Incendios" }
          ]}
        />

      </div>
    </div>
  </section>

  <!-- RELATED PRODUCTS -->
  <RelatedProductsGrid
    titulo="Otras Conexiones y Herrajes"
    subtitulo="Explora m치s opciones para tu sistema contra incendios"
    productos={otrosProductos}
    maxProductos={3}
    verTodosLink="/conexiones-herrajes-contra-incendios"
    verTodosTexto="Ver todas las conexiones"
  />

  <CotizacionForm
    titulo="Cotiza Conexiones Wye"
    tipoEquipo="Conexiones y herrajes"
    pagina="Conexiones Conexiones Wye"
  />

</Layout>
